@echo off\necho Building Dilithium 5 WASM Module...\necho.\n\n..\\..\\emsdk\\upstream\\emscripten\\emcc ^\n  -O3 ^\n  -s WASM=1 ^\n  -s NO_EXIT_RUNTIME=1 ^\n  -s ALLOW_MEMORY_GROWTH=1 ^\n  -s MODULARIZE=1 ^\n  -s EXPORT_NAME=createDilithium5Module ^\n  -s ENVIRONMENT=node ^\n  -s EXPORTED_FUNCTIONS=[\"_pqcrystals_dilithium5_ref_keypair\",\"_pqcrystals_dilithium5_ref\",\"_pqcrystals_dilithium5_ref_open\",\"_malloc\",\"_free\"] ^\n  -s EXPORTED_RUNTIME_METHODS=[\"ccall\",\"cwrap\",\"getValue\",\"setValue\",\"HEAPU8\"] ^\n  -DDILITHIUM_MODE=5 ^\n  -D__EMSCRIPTEN__ ^\n  src/sign.c ^\n  src/packing.c ^\n  src/polyvec.c ^\n  src/poly.c ^\n  src/ntt.c ^\n  src/reduce.c ^\n  src/rounding.c ^\n  src/fips202.c ^\n  src/symmetric-shake.c ^\n  src/randombytes.c ^\n  -o build/dilithium5.js\n\necho.\nif %ERRORLEVEL% == 0 (\n    echo Build successful!\n    echo Files generated:\n    dir build\n) else (\n    echo Build failed with error code %ERRORLEVEL%\n)\n\necho.\necho Press any key to continue...\npause >nul" 